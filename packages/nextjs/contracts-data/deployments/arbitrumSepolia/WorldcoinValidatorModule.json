{
  "address": "0x9003Aa6b9cA061133A8952faE3b4BCd0C83Beefe",
  "abi": [
    {
      "inputs": [],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [
        {
          "internalType": "bytes",
          "name": "arg",
          "type": "bytes"
        }
      ],
      "name": "validate",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "worldcoinVerifier",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "transactionHash": "0x4e4d8987039d12deac7c7a8eb82d28a0184b3459cbd3a287ac7cbbf0259a8bd7",
  "receipt": {
    "to": null,
    "from": "0xEB71ed911e4dFc35Da80103a72fE983C8c709F33",
    "contractAddress": "0x9003Aa6b9cA061133A8952faE3b4BCd0C83Beefe",
    "transactionIndex": 2,
    "gasUsed": "479682",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "blockHash": "0x716a154c257cbf2ce3c0685ce9f086ed3c532323dc74af702f68981b9772e154",
    "transactionHash": "0x4e4d8987039d12deac7c7a8eb82d28a0184b3459cbd3a287ac7cbbf0259a8bd7",
    "logs": [],
    "blockNumber": 74067799,
    "cumulativeGasUsed": "570146",
    "status": 1,
    "byzantium": true
  },
  "args": [],
  "numDeployments": 1,
  "solcInputHash": "d2746b0f9a1d19a0d8024192d527900d",
  "metadata": "{\"compiler\":{\"version\":\"0.8.20+commit.a1b79de6\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[{\"internalType\":\"bytes\",\"name\":\"arg\",\"type\":\"bytes\"}],\"name\":\"validate\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"worldcoinVerifier\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/modules/WorldcoinValidatorModule.sol\":\"WorldcoinValidatorModule\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[]},\"sources\":{\"contracts/modules/IValidationModule.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.20;\\n\\ninterface IValidationModule {\\n  function validate(bytes calldata arg) external returns (bool);\\n}\",\"keccak256\":\"0xbce3d3ab208ca1c7fd5e6500f0836c0b99c6dd4b172ebb27bab1a41d2322f94f\",\"license\":\"MIT\"},\"contracts/modules/WorldcoinValidatorModule.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.20;\\n\\nimport \\\"../modules/IValidationModule.sol\\\";\\n\\n\\nstruct Input {\\n  address signal;\\n  uint256 root;\\n  uint256 nullifierHash;\\n  uint256[8] proof;\\n}\\n\\nstruct Proof {\\n    uint256 root;\\n    uint256 groupId;\\n    uint256 signalHash;\\n    uint256 nullifierHash;\\n    uint256 externalNullifierHash;\\n    uint256[8] proof;\\n  }\\n\\n\\ninterface WorldcoinVerifier {\\n  \\n  function verifyProof(\\n    uint256 root,\\n    uint256 groupId,\\n    uint256 signalHash,\\n    uint256 nullifierHash,\\n    uint256 externalNullifierHash,\\n    uint256[8] calldata proof\\n  ) external returns (bool);\\n}\\n\\ncontract WorldcoinValidatorModule is IValidationModule {\\n\\n  address public worldcoinVerifier;\\n\\n  string _appId;\\n  string _action;\\n\\n  constructor() {\\n    worldcoinVerifier = 0x11cA3127182f7583EfC416a8771BD4d11Fae4334; // Sepolia Tesnet Address @todo: move to deploy script\\n  \\n    _appId = \\\"app_staging_671675a8edd5130f3a7b0d2f9bc7b11c\\\";\\n    _action = \\\"commit2\\\";\\n  }\\n  \\n\\nfunction hashToField(bytes memory value) internal pure returns (uint256) {\\n  return uint256(keccak256(abi.encodePacked(value))) >> 8;\\n}\\n\\n  function validate(bytes calldata arg) external override returns (bool) {\\n    // Decode args in Input struct\\n    Input memory input = abi.decode(arg, (Input));\\n\\n    // Create Proof struct\\n    Proof memory proof = Proof({\\n      root: input.root,\\n      groupId: 1,\\n      signalHash: hashToField(abi.encodePacked(input.signal)),\\n      nullifierHash: input.nullifierHash,\\n      externalNullifierHash: hashToField(abi.encodePacked(hashToField(abi.encodePacked(_appId)), _action)),\\n      proof: input.proof\\n    }); \\n  \\n    require(WorldcoinVerifier(worldcoinVerifier).verifyProof(\\n      proof.root,\\n      proof.groupId,\\n      proof.signalHash,\\n      proof.nullifierHash,\\n      proof.externalNullifierHash,\\n      proof.proof\\n    ), \\\"Worldcoin Verification Failed\\\");\\n    \\n    return true;\\n  }\\n}\",\"keccak256\":\"0x4d55b05a0a46c852b251164169a551e2badf98327d8220ed1608bad306a79336\",\"license\":\"MIT\"}},\"version\":1}",
  "bytecode": "0x608060405234801561001057600080fd5b50600080546001600160a01b0319167311ca3127182f7583efc416a8771bd4d11fae43341790556040805160608101909152602c808252610787602083013960019061005c908261012d565b5060408051808201909152600781526631b7b6b6b4ba1960c91b6020820152600290610088908261012d565b506101ec565b634e487b7160e01b600052604160045260246000fd5b600181811c908216806100b857607f821691505b6020821081036100d857634e487b7160e01b600052602260045260246000fd5b50919050565b601f82111561012857600081815260208120601f850160051c810160208610156101055750805b601f850160051c820191505b8181101561012457828155600101610111565b5050505b505050565b81516001600160401b038111156101465761014661008e565b61015a8161015484546100a4565b846100de565b602080601f83116001811461018f57600084156101775750858301515b600019600386901b1c1916600185901b178555610124565b600085815260208120601f198616915b828110156101be5788860151825594840194600190910190840161019f565b50858210156101dc5787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b61058c806101fb6000396000f3fe608060405234801561001057600080fd5b50600436106100365760003560e01c8063c16e50ef1461003b578063d988e14514610063575b600080fd5b61004e61004936600461026c565b61008e565b60405190151581526020015b60405180910390f35b600054610076906001600160a01b031681565b6040516001600160a01b03909116815260200161005a565b60008061009d83850185610341565b905060006040518060c00160405280836020015181526020016001815260200161010184600001516040516020016100ed919060609190911b6bffffffffffffffffffffffff1916815260140190565b604051602081830303815290604052610237565b81526020018360400151815260200161013b61012860016040516020016100ed919061047f565b60026040516020016100ed929190610492565b815260608085015160209283015260005483519284015160408581015193860151608087015160a08801519251633bc778e360e01b81529798506001600160a01b0390941696633bc778e396610199969095909390916004016104ac565b6020604051808303816000875af11580156101b8573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101dc9190610505565b61022c5760405162461bcd60e51b815260206004820152601d60248201527f576f726c64636f696e20566572696669636174696f6e204661696c6564000000604482015260640160405180910390fd5b506001949350505050565b600060088260405160200161024c9190610527565b60408051601f198184030181529190528051602090910120901c92915050565b6000806020838503121561027f57600080fd5b823567ffffffffffffffff8082111561029757600080fd5b818501915085601f8301126102ab57600080fd5b8135818111156102ba57600080fd5b8660208285010111156102cc57600080fd5b60209290920196919550909350505050565b634e487b7160e01b600052604160045260246000fd5b6040516080810167ffffffffffffffff81118282101715610317576103176102de565b60405290565b604051610100810167ffffffffffffffff81118282101715610317576103176102de565b600061016080838503121561035557600080fd5b61035d6102f4565b83356001600160a01b038116811461037457600080fd5b80825250602080850135818301526040850135604083015285607f86011261039b57600080fd5b6103a361031d565b9285019280878511156103b557600080fd5b606087015b858110156103d157803583529183019183016103ba565b506060840152509095945050505050565b8054600090600181811c90808316806103fc57607f831692505b6020808410820361041d57634e487b7160e01b600052602260045260246000fd5b818015610431576001811461044657610473565b60ff1986168952841515850289019650610473565b60008881526020902060005b8681101561046b5781548b820152908501908301610452565b505084890196505b50505050505092915050565b600061048b82846103e2565b9392505050565b82815260006104a460208301846103e2565b949350505050565b60006101a0820190508782526020878184015286604084015285606084015284608084015260a083018460005b60088110156104f6578151835291830191908301906001016104d9565b50505050979650505050505050565b60006020828403121561051757600080fd5b8151801515811461048b57600080fd5b6000825160005b81811015610548576020818601810151858301520161052e565b50600092019182525091905056fea2646970667358221220b2292f429aa0ba066e407548aed6d0ca114b2f925d4bdf0351c855d0f34c137264736f6c634300081400336170705f73746167696e675f3637313637356138656464353133306633613762306432663962633762313163",
  "deployedBytecode": "0x608060405234801561001057600080fd5b50600436106100365760003560e01c8063c16e50ef1461003b578063d988e14514610063575b600080fd5b61004e61004936600461026c565b61008e565b60405190151581526020015b60405180910390f35b600054610076906001600160a01b031681565b6040516001600160a01b03909116815260200161005a565b60008061009d83850185610341565b905060006040518060c00160405280836020015181526020016001815260200161010184600001516040516020016100ed919060609190911b6bffffffffffffffffffffffff1916815260140190565b604051602081830303815290604052610237565b81526020018360400151815260200161013b61012860016040516020016100ed919061047f565b60026040516020016100ed929190610492565b815260608085015160209283015260005483519284015160408581015193860151608087015160a08801519251633bc778e360e01b81529798506001600160a01b0390941696633bc778e396610199969095909390916004016104ac565b6020604051808303816000875af11580156101b8573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101dc9190610505565b61022c5760405162461bcd60e51b815260206004820152601d60248201527f576f726c64636f696e20566572696669636174696f6e204661696c6564000000604482015260640160405180910390fd5b506001949350505050565b600060088260405160200161024c9190610527565b60408051601f198184030181529190528051602090910120901c92915050565b6000806020838503121561027f57600080fd5b823567ffffffffffffffff8082111561029757600080fd5b818501915085601f8301126102ab57600080fd5b8135818111156102ba57600080fd5b8660208285010111156102cc57600080fd5b60209290920196919550909350505050565b634e487b7160e01b600052604160045260246000fd5b6040516080810167ffffffffffffffff81118282101715610317576103176102de565b60405290565b604051610100810167ffffffffffffffff81118282101715610317576103176102de565b600061016080838503121561035557600080fd5b61035d6102f4565b83356001600160a01b038116811461037457600080fd5b80825250602080850135818301526040850135604083015285607f86011261039b57600080fd5b6103a361031d565b9285019280878511156103b557600080fd5b606087015b858110156103d157803583529183019183016103ba565b506060840152509095945050505050565b8054600090600181811c90808316806103fc57607f831692505b6020808410820361041d57634e487b7160e01b600052602260045260246000fd5b818015610431576001811461044657610473565b60ff1986168952841515850289019650610473565b60008881526020902060005b8681101561046b5781548b820152908501908301610452565b505084890196505b50505050505092915050565b600061048b82846103e2565b9392505050565b82815260006104a460208301846103e2565b949350505050565b60006101a0820190508782526020878184015286604084015285606084015284608084015260a083018460005b60088110156104f6578151835291830191908301906001016104d9565b50505050979650505050505050565b60006020828403121561051757600080fd5b8151801515811461048b57600080fd5b6000825160005b81811015610548576020818601810151858301520161052e565b50600092019182525091905056fea2646970667358221220b2292f429aa0ba066e407548aed6d0ca114b2f925d4bdf0351c855d0f34c137264736f6c63430008140033",
  "devdoc": {
    "kind": "dev",
    "methods": {},
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {},
    "version": 1
  },
  "storageLayout": {
    "storage": [
      {
        "astId": 62,
        "contract": "contracts/modules/WorldcoinValidatorModule.sol:WorldcoinValidatorModule",
        "label": "worldcoinVerifier",
        "offset": 0,
        "slot": "0",
        "type": "t_address"
      },
      {
        "astId": 64,
        "contract": "contracts/modules/WorldcoinValidatorModule.sol:WorldcoinValidatorModule",
        "label": "_appId",
        "offset": 0,
        "slot": "1",
        "type": "t_string_storage"
      },
      {
        "astId": 66,
        "contract": "contracts/modules/WorldcoinValidatorModule.sol:WorldcoinValidatorModule",
        "label": "_action",
        "offset": 0,
        "slot": "2",
        "type": "t_string_storage"
      }
    ],
    "types": {
      "t_address": {
        "encoding": "inplace",
        "label": "address",
        "numberOfBytes": "20"
      },
      "t_string_storage": {
        "encoding": "bytes",
        "label": "string",
        "numberOfBytes": "32"
      }
    }
  }
}